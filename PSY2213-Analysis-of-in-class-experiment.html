<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Joe Sweetman" />


<title>Analysis of in-class study (PSY2213; 2024)</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Analysis of in-class study (PSY2213;
2024)</h1>
<h4 class="author">Joe Sweetman</h4>

</div>


<p>Here I provide a walk through for the statistical methods that we
will employ in the practical. You can either follow the analysis in <a
href="#r">R</a> or click on the <a href="#jamovi">Jamovi</a> version in
the menu to the left. We will load data, run generalized linear mixed
effects models, plot the models and then do some model comparison
(including Bayesian if you are using R!). The data is taken from our
in-class experiment where you good people completed the moral sense
task. The experiment set out to test whether the dual process theory
v2.0 (personal force + intention) is better than v1.0
(personal/impersonal) at explaining moral judgments. We had the
hypothesis that</p>
<blockquote>
<p>If dual process theory v2.0 is a better model of the moral mind than
v1.0, then the model should fit the data better.</p>
</blockquote>
<hr />
<p><br></p>
<div id="r" class="section level1" number="1">
<h1><span class="header-section-number">1</span> R</h1>
<p>You have decided to take your first steps toward learning a very
powerful statistical programming language (sounds impressive, right!). R
has a universe of statistical and data science tools (what we call
“packages”) that allow you to do just about anything you want to with
data. Obviously, I am not going to be able to fully teach you R through
this one example analysis but there will be enough here for you to be
able to run the analyses for your own experiment and begin to see why
this might me something worth learning and investing your time in. There
are loads of great <a
href="https://glennwilliams.me/r4psych/">introductions for R available
for free online</a> to help build a deeper understanding.<br />
<br></p>
<div id="install-r-and-rstudio" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> install R and
RStudio</h2>
<p>If you have not installed R &amp; RStudio, then do so now.</p>
<iframe width="840" height="472.5" src="https://www.youtube.com/embed/PGocx5cfq5w?si=ubd0OwwBlF5fNBwt" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
<p><br></p>
</div>
<div id="open-the-r-script-in-rstudio" class="section level2"
number="1.2">
<h2><span class="header-section-number">1.2</span> open the R script in
RStudio</h2>
<p>Below I walk you through the R code for the analysis of the in-class
study. You can download a copy of the <a
href="https://vle.exeter.ac.uk/course/view.php?id=10296">script
(“Analysis of in-class study.R”)</a> from the module ELE page. To open
the script in RStudio click <strong>“File” → “Open file…”</strong> and
select the file from your downloads folder.</p>
<p><img src="images/Open%20script.png" /> <br></p>
</div>
<div id="import-data-and-set-coding" class="section level2"
number="1.3">
<h2><span class="header-section-number">1.3</span> import data and set
coding</h2>
<p>Next, we will need to import the data from the in-class study. We
download the <a
href="https://vle.exeter.ac.uk/course/view.php?id=10296">datafile (“data
example.csv”)</a> from the module ELE page. To import the data in
RStudio click <strong>“Import Dataset” → “From Text (base)…”</strong>
and select the file from your downloads folder.</p>
<p><img src="images/Open%20data.png" /> Next, name the file “df” and
select <strong>“Yes”</strong> for the heading option and click
<strong>“Import”</strong>.</p>
<p><img src="images/Open%20data%202.png" /> You should see the “df” file
appear in the top right of your screen in the Environment panel. It
tells you that there are 4680 observations and 11 variables. You can
have a look at the data by clicking on the spreadsheet icon (table) to
the right of the data.</p>
<p><img src="images/View%20data.png" /> You can see the ID for the
participant, the dilemma, and the model parameters for that dilemma
along with the reaction time and the moral judgment (permissible).</p>
<p>Ok, so we have the data and the script which is all we need. Let’s
walk through the code so you get an understanding of what’s going on.
<br></p>
<p>If you look in the console you will see the code behind the opening
the data for your set-up (machine, OS, folders)</p>
<pre class="r"><code>df &lt;- read.csv(&quot;~/Library/CloudStorage/Dropbox/Documents/My data/Moral sense task/practical/data example.csv&quot;)</code></pre>
</div>
<div id="packages" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> packages</h2>
<p>First, we will need to install and/or load the packages that we need
into RStudio. To run the code just make sure your cursor is on the right
line and click select <strong>“Run”</strong>. This will run the current
lines of code.</p>
<pre class="r"><code># Package names
packages &lt;- c(&quot;ggplot2&quot;,  &quot;tidyverse&quot;, &quot;lme4&quot;, &quot;lmerTest&quot;, &quot;sjPlot&quot;, &quot;performance&quot;)

# Install packages not yet installed
installed_packages &lt;- packages %in% rownames(installed.packages())
if (any(installed_packages == FALSE)) {
  install.packages(packages[!installed_packages])
}

# Packages loading
library(ggplot2)
library(emmeans)
library(lme4)
library(lmerTest)
library(tidyverse)
library(sjPlot)
library(performance)</code></pre>
<p>For ease of interpretation, we set deviation coding for the factors
(what does that mean?! This makes it easier to interpret the estimates
of the effect size with complex models including interactions, so we can
interpret the estimates a bit like an ANOVA - the estimates are for the
main effects and interactions.</p>
<pre class="r"><code># make sure everything is factor
df$Task.Name &lt;- as.factor(df$Task.Name)
df$Personal &lt;- as.factor(df$Personal)
df$DPv1.0.Permissible &lt;- as.factor(df$DPv1.0.Permissible)
df$Personal.force &lt;- as.factor(df$Personal.force)
df$Intention &lt;- as.factor(df$Intention)
df$DPv2.0.Permissible &lt;- as.factor(df$DPv2.0.Permissible)

#set deviation contrasts for ease of interpretation -.5 vs .5
c&lt;-contr.treatment(2)
my.coding&lt;-matrix(rep(1/2, 2), ncol=1)
my.simple&lt;-c-my.coding
my.simple

#keys  .5 Q-Yes,  -.5 P-Yes 
contrasts(df$Task.Name)&lt;-my.simple
contrasts(df$Task.Name)

#personal .5 Yes, -.5 No
contrasts(df$Personal)&lt;-my.simple
contrasts(df$Personal)

#prediction DPv1.0 act no intended .5 Yes, -.5 No
contrasts(df$DPv1.0.Permissible)&lt;-my.simple
contrasts(df$DPv1.0.Permissible)

#personal force .5 Yes, -.5 No
contrasts(df$Personal.force)&lt;-my.simple
contrasts(df$Personal.force)

#intention .5 Yes, -.5 No
contrasts(df$Intention)&lt;-my.simple
contrasts(df$Intention)

#prediction DPv2.0 .5 Yes, -.5 No 
contrasts(df$DPv2.0.Permissible)&lt;-my.simple
contrasts(df$DPv2.0.Permissible)</code></pre>
<p><br></p>
</div>
<div id="generalized-linear-mixed-models" class="section level2"
number="1.5">
<h2><span class="header-section-number">1.5</span> generalized linear
mixed models</h2>
<p>We fit two generalized linear mixed models (GLMM) in order to test
our hypothesis. We attempt to specify “maximal” models <a
href="https://www.sciencedirect.com/science/article/abs/pii/S0749596X12001180?via%3Dihub">(see
Barr et al., 2013)</a> with all random intercepts and slopes for
participant and dilemma. Basically, we are making sure that our results
can generalise to the population of participants and dilemmas that we
have sampled from.</p>
<p><br></p>
<div id="glmm-for-dual-process-v1.0" class="section level3"
number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> GLMM for dual
process v1.0</h3>
<p>Let’s fit the GLMM for the dual process v1.0 model. We can see the
summary and get some 95% CIs.</p>
<pre class="r"><code>#Dual process v1.0 model
DPv1.0&lt;- glmer(Permissible ~ Personal +  (1+Personal|ID) + (1+Personal|Dilemma),  data=df, family = binomial(link = &quot;logit&quot;))

summary(DPv1.0)</code></pre>
<pre style="max-height: 500px;"><code>## Generalized linear mixed model fit by maximum likelihood (Laplace
##   Approximation) [glmerMod]
##  Family: binomial  ( logit )
## Formula: Permissible ~ Personal + (1 + Personal | ID) + (1 + Personal |  
##     Dilemma)
##    Data: df
## 
##      AIC      BIC   logLik deviance df.resid 
##   4310.8   4362.4  -2147.4   4294.8     4672 
## 
## Scaled residuals: 
##      Min       1Q   Median       3Q      Max 
## -11.2170  -0.4933   0.1455   0.4501   7.6298 
## 
## Random effects:
##  Groups  Name        Variance Std.Dev. Corr
##  Dilemma (Intercept) 3.086    1.757        
##          Personal2   5.381    2.320    0.17
##  ID      (Intercept) 1.582    1.258        
##          Personal2   1.328    1.153    0.86
## Number of obs: 4680, groups:  Dilemma, 104; ID, 45
## 
## Fixed effects:
##             Estimate Std. Error z value Pr(&gt;|z|)  
## (Intercept)   0.5201     0.2949   1.764   0.0778 .
## Personal2     0.1343     0.4866   0.276   0.7826  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##           (Intr)
## Personal2 0.512</code></pre>
<pre class="r"><code>confint(DPv1.0, parm = &quot;beta_&quot;, method=&quot;Wald&quot;)</code></pre>
<pre style="max-height: 500px;"><code>##                   2.5 %   97.5 %
## (Intercept) -0.05786207 1.098125
## Personal2   -0.81941631 1.088008</code></pre>
<p>The personal (vs. impersonal) parameter (IV or fixed effect) doesn’t
seem to differ significantly from the null. The log odds ratio = 0.134
so the odds ratio is exp(0.134) = 1.14 about equal odds. The 95% CIs
show a fair amount of imprecision in the estimate - we need more data
for more precision. We can also see the information criterion methods
for model comparison with AIC = 4310.8 and BIC = 4362.4.</p>
<p>We can plot the data from the model.</p>
<pre class="r"><code>set_theme(base = theme_classic())
plot_model(DPv1.0, terms = &quot;Personal&quot;, type = &quot;pred&quot;)</code></pre>
<p><img src="PSY2213-Analysis-of-in-class-experiment_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Here we can see similar rates of permissible judgments across
personal and impersonal conditions. The 95% CIs on the estimates show a
fair amount of imprecision in the estimate, at least for the personal
condition (this reflects the relative low number of personal dilemmas in
the task).</p>
<p><br></p>
</div>
<div id="glmm-for-dual-process-v2.0" class="section level3"
number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> GLMM for dual
process v2.0</h3>
<p>OK, let’s do the GLMM for dual process model v2.0. Here we add the
parameters (personal force &amp; intention) and their interaction to the
model. We include all of the random variables except the random slopes
for the two interaction terms (“Personal.force:Intention|ID &amp;
Personal.force:Intention|Dilemma)”. If we included these two random
variables the model will not converge/work as the random effects data
structure is too complex for the data we have.</p>
<pre class="r"><code>#Dual process v2.0 model
DPv2.0&lt;- glmer(Permissible ~ Personal.force*Intention +  (1+Personal.force+Intention|ID) + (1+Personal.force+Intention|Dilemma),  data=df, family = binomial(link = &quot;logit&quot;), control = glmerControl(optimizer = &quot;nloptwrap&quot;, optCtrl = list(algorithm =  &quot;NLOPT_LN_NELDERMEAD&quot;)))

summary(DPv2.0)</code></pre>
<pre style="max-height: 500px;"><code>## Generalized linear mixed model fit by maximum likelihood (Laplace
##   Approximation) [glmerMod]
##  Family: binomial  ( logit )
## Formula: Permissible ~ Personal.force * Intention + (1 + Personal.force +  
##     Intention | ID) + (1 + Personal.force + Intention | Dilemma)
##    Data: df
## Control: 
## glmerControl(optimizer = &quot;nloptwrap&quot;, optCtrl = list(algorithm = &quot;NLOPT_LN_NELDERMEAD&quot;))
## 
##      AIC      BIC   logLik deviance df.resid 
##   4345.3   4448.6  -2156.7   4313.3     4664 
## 
## Scaled residuals: 
##     Min      1Q  Median      3Q     Max 
## -9.2514 -0.4840  0.1505  0.4590  8.4201 
## 
## Random effects:
##  Groups  Name            Variance Std.Dev. Corr       
##  Dilemma (Intercept)     0.4643   0.6814              
##          Personal.force2 4.3776   2.0923   0.09       
##          Intention2      6.7468   2.5975   0.60  0.85 
##  ID      (Intercept)     1.3629   1.1674              
##          Personal.force2 0.7499   0.8660    0.61      
##          Intention2      0.2233   0.4725    0.27 -0.13
## Number of obs: 4680, groups:  Dilemma, 104; ID, 45
## 
## Fixed effects:
##                            Estimate Std. Error z value Pr(&gt;|z|)    
## (Intercept)                  0.8280     0.2569   3.223 0.001267 ** 
## Personal.force2              0.9024     0.3990   2.262 0.023726 *  
## Intention2                  -1.4247     0.3842  -3.708 0.000209 ***
## Personal.force2:Intention2  -1.4234     0.7540  -1.888 0.059057 .  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Correlation of Fixed Effects:
##             (Intr) Prsn.2 Intnt2
## Persnl.frc2 0.443               
## Intention2  0.356  0.518        
## Prsnl.f2:I2 0.416  0.425  0.435</code></pre>
<pre class="r"><code>confint(DPv2.0, parm = &quot;beta_&quot;,method=&quot;Wald&quot;)</code></pre>
<pre style="max-height: 500px;"><code>##                                 2.5 %     97.5 %
## (Intercept)                 0.3245063  1.3314177
## Personal.force2             0.1203419  1.6845427
## Intention2                 -2.1777371 -0.6715803
## Personal.force2:Intention2 -2.9012928  0.0544354</code></pre>
<p>The parameters for personal force and intention are both significant.
The log odds ratio for personal force = 0.90 so the odds ratio is
exp(0.90) = 2.46, so (weirdly) the odds are about twice as likely that
an action will be seen as permissible if it has personal force. The 95%
CIs show a fair amount of imprecision in the estimate - we need more
data for more precision. More in line with expectations, we can see the
log odds ratio for intention (means vs. side-effect) = -1.425 so the
odds ratio is exp(-1.425) = .24, so the odds are about four times as
likely that an action will be seen as permissible if it is not
intentional - i.e., the harm is a side-effect not a means. The 95% CIs
also show a fair amount of imprecision in the estimate. Finally, we can
also see the information criterion model comparison indices, AIC =
4345.3 and BIC = 4448.6.</p>
<p>We can plot the data from the model.</p>
<pre class="r"><code>set_theme(base = theme_classic())
plot_model(DPv2.0, type = &quot;int&quot;)</code></pre>
<p><img src="PSY2213-Analysis-of-in-class-experiment_files/figure-html/unnamed-chunk-7-1.png" width="672" />
<br></p>
</div>
</div>
<div id="model-comparison" class="section level2" number="1.6">
<h2><span class="header-section-number">1.6</span> model comparison</h2>
<p>To test our hypothesis we want to see which model best fits the data,
so let’s have a look at the model comparisons.</p>
<div id="bayes-factor-model-comparison" class="section level3"
number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Bayes factor model
comparison</h3>
<p>Now we can compare the models using Bayes Factors to get the relative
likelihood of the models given the data we have.</p>
<pre class="r"><code>test_bf(DPv2.0, DPv1.0)</code></pre>
<pre style="max-height: 500px;"><code>## Bayes Factors for Model Comparison
## 
##          Model                                                           BF
## [DPv1.0] Personal + (1 + Personal | ID) + (1 + Personal | Dilemma) 5.02e+18
## 
## * Against Denominator: [DPv2.0] Personal.force * Intention + (1 + Personal.force + Intention | ID) + (1 + Personal.force + Intention | Dilemma)
## *   Bayes Factor Type: BIC approximation</code></pre>
<p>This shows us that the dual process v1.0 model (compared to v2.0) is
a lot, BF = 5.02 * 10<sup>18</sup> (this is scientific notation for a
big number: 5020000000000000000), of times more likely than the dual
process v2.0 model given the data. A Bayes Factor of &gt; 100 is extreme
evidence for the hypothesis/model. See the table below for some
interpretations of different Bayes Factors. Bayes Factors are useful as
they provide a quantitative measure of evidence rather than a single
cut-off of p &lt; .05. They can also provide evidence for the null.
Rather than just simply failing to reject the null hypothesis as in
classic statistics BFs can provide support for the null.</p>
<p><img src="images/BFs.png" /> <br></p>
</div>
<div id="information-criterion-aic-and-bic" class="section level3"
number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> information
criterion (AIC and BIC)</h3>
<p>We can also look at our more traditional information criterion
indices.</p>
<pre class="r"><code>compare_performance(DPv2.0,DPv1.0)</code></pre>
<pre style="max-height: 500px;"><code>## # Comparison of Model Performance Indices
## 
## Name   |    Model |  AIC (weights) | AICc (weights) |  BIC (weights) | R2 (cond.) | R2 (marg.) |   ICC |  RMSE | Sigma | Log_loss | Score_log | Score_spherical
## ---------------------------------------------------------------------------------------------------------------------------------------------------------------
## DPv2.0 | glmerMod | 4345.3 (&lt;.001) | 4345.5 (&lt;.001) | 4448.6 (&lt;.001) |      0.621 |      0.028 | 0.610 | 0.349 | 1.000 |    0.392 |      -Inf |       3.379e-04
## DPv1.0 | glmerMod | 4310.8 (&gt;.999) | 4310.9 (&gt;.999) | 4362.4 (&gt;.999) |      0.636 |  4.517e-04 | 0.636 | 0.348 | 1.000 |    0.390 |      -Inf |       2.154e-04</code></pre>
<p>Here we see what we could have seen in the model outputs above: that
the dual process v1.0 model has a relatively better fit than the v2.0
model. That is, both it’s AIC 4310.8 (vs. 4345.3) and BIC 4362.4
(vs. 4448.6) are lower than those of v2.0.</p>
</div>
</div>
</div>
<div id="jamovi" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Jamovi</h1>
<div id="install-jamovi" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> install Jamovi</h2>
<p>If you have not installed Jamovi, then do so now.</p>
<iframe width="840" height="472.5" src="https://www.youtube.com/embed/QVNQh9JerjA?si=KcDLge1pFOMEVgHg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
</iframe>
<p><br></p>
</div>
<div id="import-data-and-add-module" class="section level2"
number="2.2">
<h2><span class="header-section-number">2.2</span> import data and add
module</h2>
<p>Next, we will need to import the data from the in-class study. We
download the <a
href="https://vle.exeter.ac.uk/course/view.php?id=10296">datafile (“data
example.csv”)</a> from the module ELE page. To import the data in Jamovi
click the menu (three horizontal bars at the top left) button then
<strong>“Special Import”</strong> and select the data file from your
downloads folder.</p>
<p><img src="images/Jamovi%20open%20data.png" /></p>
<p>You should see the variables in the dataset appear.</p>
<p>Next, we need to add a module (i.e., package) from the Jamovi library
so that we can run a generalised linear mixed effects model. Select
<strong>“+”</strong> (in the top right) and click <strong>“jamovi
library”</strong>.</p>
<p><img src="images/Add%20module.png" /> Type “mixed” in the search bar
and select <strong>“install”</strong> for the “gamlj” module.</p>
<p><img src="images/Select%20gamlj.png" /> <br></p>
</div>
<div id="generalized-linear-mixed-models-1" class="section level2"
number="2.3">
<h2><span class="header-section-number">2.3</span> generalized linear
mixed models</h2>
<p>We fit two generalized linear mixed models (GLMM) in order to test
our hypothesis. We attempt to specify “maximal” models <a
href="https://www.sciencedirect.com/science/article/abs/pii/S0749596X12001180?via%3Dihub">(see
Barr et al., 2013)</a> with all random intercepts and slopes for
participant and dilemma. Basically, we are making sure that our results
can generalise to the population of participants and dilemmas that we
have sampled from.</p>
<p><br></p>
<div id="glmm-for-dual-process-v1.0-1" class="section level3"
number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> GLMM for dual
process v1.0</h3>
<p>First, we need to change dilemma into a nominal variable (Jamovi
doesn’t automatically recognise it as one) so we can add it as a random
variable.</p>
<p>Click the <strong>“Data”</strong> tab and then click on the column
heading for <strong>“Dilemma”</strong>. Now change the “Measure type” to
<strong>“Nominal”</strong>. You should see that the variable type icon
in the column heading has changed.</p>
<p><img src="images/Type%20of%20variable.png" /></p>
<p>Let’s fit the GLMM for the dual process v1.0 model. Select the
<strong>“Analysis”</strong> tab and then <strong>“Linear Models” →
“Generalized mixed models”</strong></p>
<p><img src="images/GLMM.png" /></p>
<p>Place “Permissible” into the “Dependent Variable” box by selecting it
and then selecting the <strong>“→”</strong>. Select “Personal” and place
it into the “Factors” box. Finally, select “ID” (participant ID) and
“Dilemma” and place them into the “Cluster variables” (random variables)
box. Select “Confidence intervals” <strong>“For
estimates”</strong>for</p>
<p><img src="images/Jamovi%20DPv1%20model.png" /></p>
<p>In the random effects panel select all of the random variables
(Cluster variables) and place them in the “Random coefficients” box. The
model will run automatically and provide you with a summary. The
personal (vs. impersonal) parameter (IV or fixed effect) doesn’t seem to
differ significantly from the null. The log odds ratio = 0.134 so the
odds ratio is exp(0.134) = 1.14 about equal odds. The 95% CIs show a
fair amount of imprecision in the estimate - we need more data for more
precision. We can also see the information criterion methods for model
comparison with AIC = 4310.8 and BIC = 4362.4.</p>
<p><img src="images/Model%20summary%20DPv1.png" /></p>
<p>We can plot the model using the “Plot” panel. Select personal and put
it into the “Horizontal axis” box. Select “Confidence intervals.” Here
we can see similar rates of permissible judgments across personal and
impersonal conditions. The 95% CIs on the estimates show a fair amount
of imprecision in the estimate, at least for the personal condition
(this reflects the relative low number of personal dilemmas in the
task).</p>
<p><img src="images/Plot%20DPv1.png" /></p>
</div>
<div id="glmm-for-dual-process-v2.0-1" class="section level3"
number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> GLMM for dual
process v2.0</h3>
<p>OK, let’s do the GLMM for dual process model v2.0. Here we add the
parameters (personal force &amp; intention) and their interaction to the
model. We remove “Personal” from the “Factors” box and add
“Personal.force” and “Intention”.</p>
<p><img src="images/DPv2.png" /></p>
<p>We need to place all of the random variables in the “Random Effects”
panel, except the random slopes for the two interaction terms
(“Personal.force:Intention|ID &amp; Personal.force:Intention|Dilemma)”,
into the “Random Coefficients” box. If we included these two random
variables the model will not converge/work as the random effects data
structure is too complex for the data we have.</p>
<p><img src="images/DPv2%20random%20variables.png" /></p>
<p>For ease of interpretation, we also set “simple” coding for the
factors in the “Factor Coding” panel. What does that mean?! This makes
it easier to interpret the estimates of the effect size with complex
models including interactions, so we can interpret the estimates a bit
like an ANOVA - the estimates are for the main effects and interactions.
The model may take some time to compute (5-10 mins), depending on the
speed of your machine. Let’s have a look at the model summary.</p>
<p><img src="images/DPv2%20model%20summary.png" /></p>
<p>The parameters for personal force and intention are both significant.
The log odds ratio for personal force = 0.90 so the odds ratio is
exp(0.90) = 2.46, so (weirdly) the odds are about twice as likely that
an action will be seen as permissible if it has personal force. The 95%
CIs show a fair amount of imprecision in the estimate - we need more
data for more precision. More in line with expectations, we can see the
log odds ratio for intention (means vs. side-effect) = -1.425 so the
odds ratio is exp(-1.425) = .24, so the odds are about four times as
likely that an action will be seen as permissible if it is not
intentional - i.e., the harm is a side-effect not a means. The 95% CIs
also show a fair amount of imprecision in the estimate. Finally, we can
also see the information criterion model comparison indices, AIC =
4345.3 and BIC = 4448.6.</p>
</div>
</div>
<div id="model-comparison-1" class="section level2" number="2.4">
<h2><span class="header-section-number">2.4</span> model comparison</h2>
<p>To test our hypothesis we want to see which model best fits the data,
so let’s have a look again at the traditional information criterion
indices. We see from the model summaries above that the dual process
v1.0 model has a relatively better fit than the v2.0 model. That is,
both it’s AIC 4310.8 (vs. 4345.3) and BIC 4362.4 (vs. 4448.6) are lower
than those of v2.0.</p>
</div>
</div>
<div id="example-write-up" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Example write-up</h1>
<p>To test our hypothesis we fitted two mixed effects models to examine
the relationship between the dual process models and moral judgment. We
fitted the respective model parameters as fixed effects and participant
and dilemma as random effects. The dual process model v1.0 “Personal”
parameter did not have a significant effect on moral judgment,
<em>b</em> = 0.13, 95% CIs [-0.82, 1.09], <em>p</em> = .78 (see Figure
1). Model fit statistics revealed that AIC = 4310.8 and BIC =
4362.4.</p>
<p>The dual process model v2.0 showed a significant effect of intention,
<em>b</em> = -1.4247, 95% CIs [-2.18, -0.67], <em>p</em> &lt; 0.001.
Figure 2 shows that when the harm is intended (a means) the action is
judged as less permissible. Personal force also showed a significant
effect, <em>b</em> = 0.90, 95% CIs [0.12, 1.68], <em>p</em> = 0.02.
Figure 2 shows how when the harm was caused by personal force the action
was judged as more permissible. We can also see that this is driven by
unintended personal force, although the interaction between personal
force and intention was not significant, <em>b</em> = -1.42, 95% CIs
[-2.90, 0.05], <em>p</em> = 0.06. Model summary fit statistics were AIC
= 4345.3 and BIC = 4448.6</p>
<p>Comparison of the model fit statistics suggest that the dual process
model v1.0 better fit the data as it has a lower AIC and BIC. Indeed, we
find extreme evidence in favour of the dual process v1.0 model (compared
to v2.0), BF = 5.02 * 10<sup>18</sup>. This is despite that fact that
v2.0 did show some significant effects. These fit statistics and model
comparison are relative and not absolute. The fact that dual process
v2.0 has significant effects but v1.0 still fits the data better may
suggest that both models do not fit the data that well. Future research
is needed to test alternative models.</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
